
---
layout: default
---

{%- assign show_toc = page.toc | default: true -%}
<main class="page-content" aria-label="Content">
  <div class="wrapper">
    <article class="post">
      <header class="post-header">
        <h1 class="post-title">{{ page.title | escape }}</h1>
        {%- if page.date -%}
          <p class="post-meta">{{ page.date | date_to_string }}{% if page.categories %} • Categories: {{ page.categories | join: ', ' }}{% endif %}{% if page.tags %} • Tags: {{ page.tags | join: ', ' }}{% endif %}</p>
        {%- endif -%}
      </header>

      {%- if show_toc -%}
      <nav class="toc" id="toc">
        <div class="toc-title">目次</div>
        <ul></ul>
      </nav>
      <script>
      (function(){
        const content = document.querySelector('.post-content');
        const toc = document.querySelector('#toc ul');
        if (!content || !toc) return;
        const hs = content.querySelectorAll('h2, h3');
        hs.forEach(h => {
          if (!h.id) h.id = h.textContent.trim().toLowerCase().replace(/\s+/g,'-').replace(/[^a-z0-9\-]/g,'');
          const li = document.createElement('li');
          if (h.tagName === 'H3') li.style.marginLeft = '1rem';
          const a = document.createElement('a');
          a.textContent = h.textContent;
          a.href = '#' + h.id;
          li.appendChild(a);
          toc.appendChild(li);
        });
        if (!hs.length) document.getElementById('toc').style.display = 'none';
      })();
      </script>
      {%- endif -%}

      <div class="post-content">
        {{ content }}
      </div>
    </article>
  </div>
</main>
